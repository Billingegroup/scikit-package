<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>(Level 5) Share code as a publicly installable Python package &mdash; scikit-package 0.0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />

  
    <link rel="shortcut icon" href="../_static/scikit-package-logo-blank.png"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=f539c95a"></script>
        <script src="../_static/doctools.js?v=9bcbadda"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../_static/copybutton.js?v=cca77546"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Publish on GitHub and to PyPI" href="../release-guides/pypi-github.html" />
    <link rel="prev" title="(Level 4) Share code as a locally installable Python package" href="level-4-tutorial.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/scikit-package-logo-docs.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.0.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">GETTING STARTED</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">TUTORIALS</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="level-1-2-3-tutorials.html">(Level 1-3) Reuse code within a file, across files and folders</a></li>
<li class="toctree-l1"><a class="reference internal" href="level-4-tutorial.html">(Level 4) Share code as a locally installable Python package</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">(Level 5) Share code as a publicly installable Python package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="#what-s-the-difference-between-level-4-and-level-5">What’s the difference between Level 4 and Level 5?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-a-new-project-with-scikit-package">Create a new project with <code class="docutils literal notranslate"><span class="pre">scikit-package</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-scikit-package-with-conda">Install <code class="docutils literal notranslate"><span class="pre">scikit-package</span></code> with conda</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-a-new-project-folder-with-scikit-package-using-the-level-5-public-template">Create a new project folder with <code class="docutils literal notranslate"><span class="pre">scikit-package</span></code> using the Level-5 <code class="docutils literal notranslate"><span class="pre">public</span></code> template.</a></li>
<li class="toctree-l2"><a class="reference internal" href="#enter-the-new-folder">Enter the new folder</a></li>
<li class="toctree-l2"><a class="reference internal" href="#migration-code-from-level-4-to-level-5">Migration code from Level 4 to Level 5</a></li>
<li class="toctree-l2"><a class="reference internal" href="#build-documentation-locally">Build documentation locally</a></li>
<li class="toctree-l2"><a class="reference internal" href="#upload-your-code-to-github">Upload your code to GitHub</a></li>
<li class="toctree-l2"><a class="reference internal" href="#setup-codecov-token-for-github-repository">Setup Codecov token for GitHub repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="#allow-github-actions-to-write-comments-in-prs">Allow GitHub Actions to write comments in PRs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#add-news-items-in-the-github-pull-request">Add news items in the GitHub pull request</a></li>
<li class="toctree-l2"><a class="reference internal" href="#optional-build-api-reference-documentation">(Optional) Build API reference documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ready-for-public-release">Ready for public release?</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">RELEASE GUIDES</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../release-guides/pypi-github.html">Publish on GitHub and to PyPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-guides/conda-forge.html">Create conda package with conda-forge</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">PROGRAMMING GUIDES</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../billinge-group-standards.html">Billinge Group standards</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">EXAMPLES</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/migration.html">Migrate your existing package with <code class="docutils literal notranslate"><span class="pre">scikit-package</span></code></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SUPPORT</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../frequently-asked-questions.html">Frequently asked questions (FAQ)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">REFERENCE</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../release.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">scikit-package</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">(Level 5) Share code as a publicly installable Python package</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/Billingegroup/scikit-package/blob/main/doc/source/tutorials/level-5-tutorial.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="level-5-share-code-as-a-publicly-installable-python-package">
<span id="level-5-tutorial"></span><h1>(Level 5) Share code as a publicly installable Python package<a class="headerlink" href="#level-5-share-code-as-a-publicly-installable-python-package" title="Link to this heading"></a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>In this guide, you will learn to migrate your package from Level 4 to Level 5. Once you have your package up to the Level 5 standard, you can share your code with the world.</p>
</section>
<section id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Link to this heading"></a></h2>
<p>You have already completed and created your scientific code in Level 4, where you have a lightweight Python package that can be installed locally and have your project hosted on GitHub.</p>
</section>
<section id="what-s-the-difference-between-level-4-and-level-5">
<h2>What’s the difference between Level 4 and Level 5?<a class="headerlink" href="#what-s-the-difference-between-level-4-and-level-5" title="Link to this heading"></a></h2>
<p>Besides the final goal of releasing your package, you will also have the following features:</p>
<ul class="simple">
<li><p>Develop documentation with Sphinx with live loading.</p></li>
<li><p>Host documentation on a public URL with GitHub Pages.</p></li>
<li><p>Use GitHub tags to release your package to GitHub and PyPI.</p></li>
<li><p>Maintain changelogs and release notes automatically for each version.</p></li>
</ul>
</section>
<section id="create-a-new-project-with-scikit-package">
<h2>Create a new project with <code class="docutils literal notranslate"><span class="pre">scikit-package</span></code><a class="headerlink" href="#create-a-new-project-with-scikit-package" title="Link to this heading"></a></h2>
<p>Make sure you have the latest version of <code class="docutils literal notranslate"><span class="pre">scikit-package</span></code> installed as shown in Level 4.</p>
</section>
<section id="install-scikit-package-with-conda">
<span id="scikit-package-installation"></span><h2>Install <code class="docutils literal notranslate"><span class="pre">scikit-package</span></code> with conda<a class="headerlink" href="#install-scikit-package-with-conda" title="Link to this heading"></a></h2>
<ol class="arabic">
<li><p>Ensure you have <code class="docutils literal notranslate"><span class="pre">conda</span></code> installed and the <code class="docutils literal notranslate"><span class="pre">conda-forge</span></code> channel added to your conda configuration. If you haven’t, check <a class="reference internal" href="level-1-2-3-tutorials.html#conda-env-setup-simple"><span class="std std-ref">here</span></a> for instructions on how to install and include the <code class="docutils literal notranslate"><span class="pre">conda-forge</span></code> channel.</p></li>
<li><p>Create a new environment named <code class="docutils literal notranslate"><span class="pre">&lt;project&gt;-env</span></code>, e.g., <code class="docutils literal notranslate"><span class="pre">skpkg-env</span></code>. Install <code class="docutils literal notranslate"><span class="pre">scikit-package</span></code> and <code class="docutils literal notranslate"><span class="pre">pre-commit</span></code> simultaneously by running the following command:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conda<span class="w"> </span>create<span class="w"> </span>-n<span class="w"> </span>skpkg-env<span class="w"> </span>scikit-package<span class="w"> </span>pre-commit
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Activate the environment:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>conda<span class="w"> </span>activate<span class="w"> </span>skpkg-env
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Confirm that you have the latest version of <code class="docutils literal notranslate"><span class="pre">scikit-package</span></code> available on GitHub:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>pip<span class="w"> </span>show<span class="w"> </span>scikit-package
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
</section>
<section id="create-a-new-project-folder-with-scikit-package-using-the-level-5-public-template">
<span id="level-5-new-project"></span><h2>Create a new project folder with <code class="docutils literal notranslate"><span class="pre">scikit-package</span></code> using the Level-5 <code class="docutils literal notranslate"><span class="pre">public</span></code> template.<a class="headerlink" href="#create-a-new-project-folder-with-scikit-package-using-the-level-5-public-template" title="Link to this heading"></a></h2>
<ol class="arabic">
<li><p>Visit your project directory and sync with the latest version of the main branch.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>&lt;project-name&gt;
$<span class="w"> </span>git<span class="w"> </span>checkout<span class="w"> </span>main
$<span class="w"> </span>git<span class="w"> </span>pull<span class="w"> </span>origin<span class="w"> </span>main
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Create a new branch where you will initiate a new project.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>skpkg-public
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Create a new project with <code class="docutils literal notranslate"><span class="pre">scikit-package</span></code> using the Level-5 <code class="docutils literal notranslate"><span class="pre">public</span></code> template.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>package<span class="w"> </span>create<span class="w"> </span>public
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Answer the following questions:</p></li>
</ol>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Description and example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>maintainer_name</p></td>
<td><p>The name of the project maintainer.
e.g., Simon Billinge</p></td>
</tr>
<tr class="row-odd"><td><p>maintainer_email</p></td>
<td><p>The maintainer’s email address.
e.g., <a class="reference external" href="mailto:sbillinge&#37;&#52;&#48;columbia&#46;edu">sbillinge<span>&#64;</span>columbia<span>&#46;</span>edu</a></p></td>
</tr>
<tr class="row-even"><td><p>maintainer_github_username</p></td>
<td><p>The maintainer’s GitHub username.
e.g., sbillinge</p></td>
</tr>
<tr class="row-odd"><td><p>contributors</p></td>
<td><p>Individuals or groups contributing to the project.
e.g., Sangjoon Lee, Simon Billinge, Billinge Group members</p></td>
</tr>
<tr class="row-even"><td><p>license_holders</p></td>
<td><p>The license holders listed in <code class="docutils literal notranslate"><span class="pre">LICENSE.rst</span></code>.
e.g., The Trustees of Columbia University in the City of New York</p></td>
</tr>
<tr class="row-odd"><td><p>project_name</p></td>
<td><p>The name displayed in the <code class="docutils literal notranslate"><span class="pre">README.rst</span></code> and documentation.
Use <code class="docutils literal notranslate"><span class="pre">name-with-hyphens</span></code> e.g., <code class="docutils literal notranslate"><span class="pre">my-package</span></code>.
To support namespace imports, see <a class="reference internal" href="../frequently-asked-questions.html#faq-project-setup-namespace"><span class="std std-ref">FAQ</span></a></p></td>
</tr>
<tr class="row-even"><td><p>github_username_or_orgname</p></td>
<td><p>The GitHub username or organization name.
e.g., sbillinge or billingegroup</p></td>
</tr>
<tr class="row-odd"><td><p>github_repo_name</p></td>
<td><p>The GitHub repository name.
Use <code class="docutils literal notranslate"><span class="pre">name-with-hyphens</span></code> e.g., my-package</p></td>
</tr>
<tr class="row-even"><td><p>conda_pypi_package_dist_name</p></td>
<td><p>The name used for publishing to PyPI and conda-forge.
Use <code class="docutils literal notranslate"><span class="pre">name-with-hyphens</span></code> e.g., my-package</p></td>
</tr>
<tr class="row-odd"><td><p>package_dir_name</p></td>
<td><p>The name of the package directory under <code class="docutils literal notranslate"><span class="pre">src</span></code>.
Use <code class="docutils literal notranslate"><span class="pre">name_with_underscores</span></code> e.g., my_package</p></td>
</tr>
<tr class="row-even"><td><p>project_short_description</p></td>
<td><p>A brief description of the project, shown in <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>.
e.g., A Python package standard for scientific code</p></td>
</tr>
<tr class="row-odd"><td><p>project_keywords</p></td>
<td><p>A list of keywords included in <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>.
e.g., PDF, diffraction, neutron, x-ray</p></td>
</tr>
<tr class="row-even"><td><p>min_python_version</p></td>
<td><p>The minimum supported Python version.
e.g. 3.11</p></td>
</tr>
<tr class="row-odd"><td><p>max_python_version</p></td>
<td><p>The maximum supported Python version
e.g. 3.13</p></td>
</tr>
<tr class="row-even"><td><p>needs_c_code_compiled</p></td>
<td><p>Specifies whether C code compilation is required.
For pure Python packages, the default value is <code class="docutils literal notranslate"><span class="pre">No</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p>has_gui_tests</p></td>
<td><p>Specifies whether GUI tests are included.
For most packages, the default value is <code class="docutils literal notranslate"><span class="pre">No</span></code>.</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="enter-the-new-folder">
<h2>Enter the new folder<a class="headerlink" href="#enter-the-new-folder" title="Link to this heading"></a></h2>
<ol class="arabic">
<li><p>Enter into the Level 5 project directory.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>my-package
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Check that you have the following nested folder structure. Here is the structure. We will go through each file and folder.</p>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>my-package     # (Level 4)
└── my-package # (Level 5)
    ├── AUTHORS.rst
    ├── CHANGELOG.rst
    ├── CODE_OF_CONDUCT.rst
    ├── LICENSE.rst
    ├── MANIFEST.in
    ├── README.rst
    ├── doc
    ├── news
    ├── pyproject.toml
    ├── requirements
    ├── src
    └── tests
├── LICENSE.rst
├── README.md
├── pyproject.toml
├── requirements
├── src
└── tests
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
</section>
<section id="migration-code-from-level-4-to-level-5">
<h2>Migration code from Level 4 to Level 5<a class="headerlink" href="#migration-code-from-level-4-to-level-5" title="Link to this heading"></a></h2>
<ol class="arabic">
<li><p>Move the local <code class="docutils literal notranslate"><span class="pre">git</span></code> repository from the Level 4 to the Level 5 folder.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>mv<span class="w"> </span>../.git<span class="w"> </span>.
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Move the <code class="docutils literal notranslate"><span class="pre">src</span></code> and <code class="docutils literal notranslate"><span class="pre">tests</span></code> folders from Level 4 to Level 5.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>cp<span class="w"> </span>-n<span class="w"> </span>-r<span class="w"> </span>../src<span class="w"> </span>.
$<span class="w"> </span>cp<span class="w"> </span>-n<span class="w"> </span>-r<span class="w"> </span>../tests<span class="w"> </span>.
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Copy the requirements files from Level 4 to Level 5.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>cp<span class="w"> </span>../requirements/conda.txt<span class="w"> </span>./requirements/conda.txt
$<span class="w"> </span>cp<span class="w"> </span>../requirements/pip.txt<span class="w"> </span>./requirements/pip.txt
$<span class="w"> </span>cp<span class="w"> </span>../requirements/test.txt<span class="w"> </span>./requirements/test.txt
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>At this point, you should be able to install the package locally and test it.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span>.
$<span class="w"> </span>pytest
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Once the tests pass, let’s manually migrate hand-written files like <code class="docutils literal notranslate"><span class="pre">README.md</span></code> from Level 4 to Level 5.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>In Level 5, we provide a rich template for <code class="docutils literal notranslate"><span class="pre">README.rst</span></code> instead of using <code class="docutils literal notranslate"><span class="pre">README.md</span></code>. If you already had a rich <code class="docutils literal notranslate"><span class="pre">README.md</span></code> in Level 4, you can use a tool to convert <code class="docutils literal notranslate"><span class="pre">.md</span></code> to <code class="docutils literal notranslate"><span class="pre">.rst</span></code>. For example, you may use this free <a class="reference external" href="https://cloudconvert.com/md-to-rst/">CloudConvert</a> tool.</p>
</div>
</div></blockquote>
</li>
<li><p>Done!</p></li>
</ol>
</section>
<section id="build-documentation-locally">
<h2>Build documentation locally<a class="headerlink" href="#build-documentation-locally" title="Link to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">/doc</span></code> is the the Sphinx documentation folder. The documentation will be built locally first and then automatically built and hosted on GitHub Pages when a new release is created.</p>
</section>
<section id="upload-your-code-to-github">
<h2>Upload your code to GitHub<a class="headerlink" href="#upload-your-code-to-github" title="Link to this heading"></a></h2>
<ol class="arabic">
<li><p>Let’s now add all the files and folders to the GitHub repository.</p></li>
<li><p>Since the template is expected to work out of the box from Level 4 to 5, we can simply git add all the files and folders to the GitHub repository.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>add<span class="w"> </span>.
$<span class="w"> </span>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;skpkg: migrate from Level 4 to Level 5&quot;</span>
$<span class="w"> </span>git<span class="w"> </span>push<span class="w"> </span>--set-upstream<span class="w"> </span>origin<span class="w"> </span>skpkg-public
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Let’s not migrate our code to the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch just yet since mistakes could happen. Let’s create a new branch called <code class="docutils literal notranslate"><span class="pre">skpkg-migration</span></code>.</p></li>
<li><p>Visit your GitHub repository. On the main page, notice the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch clickable button, and it says, <code class="docutils literal notranslate"><span class="pre">Find</span> <span class="pre">or</span> <span class="pre">create</span> <span class="pre">a</span> <span class="pre">branch</span></code>.</p></li>
<li><p>Enter <code class="docutils literal notranslate"><span class="pre">skpkg-migration</span></code> in the text box. Click on the <code class="docutils literal notranslate"><span class="pre">Create</span> <span class="pre">branch:</span> <span class="pre">skpkg-migration</span> <span class="pre">from</span> <span class="pre">main</span></code> button.</p></li>
<li><p>Create a PR from <code class="docutils literal notranslate"><span class="pre">skpkg-public</span></code> to a new branch called <code class="docutils literal notranslate"><span class="pre">skpkg-migration</span></code>.</p></li>
<li><p>Set the PR title as <code class="docutils literal notranslate"><span class="pre">skpkg:</span> <span class="pre">migrate</span> <span class="pre">from</span> <span class="pre">Level</span> <span class="pre">4</span> <span class="pre">to</span> <span class="pre">Level</span> <span class="pre">5</span></code>.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>There are some important files and folders that are different from Level 4. Don’t worry about them. We will go through them one by one for each section throughout the guide.</p>
</div>
</div></blockquote>
</li>
<li><p>Expect <code class="docutils literal notranslate"><span class="pre">tests-on-PR</span></code> to fail while <code class="docutils literal notranslate"><span class="pre">pre-commit</span> <span class="pre">CI</span></code> works.</p></li>
<li><p>Merge the PR to the <code class="docutils literal notranslate"><span class="pre">skpkg-migration</span></code> branch. It’s okay that the CI fails. We will fix it in the following section.</p></li>
<li><p>Let’s fix the <code class="docutils literal notranslate"><span class="pre">Codecov</span></code> CI error in the following section.</p></li>
</ol>
</section>
<section id="setup-codecov-token-for-github-repository">
<h2>Setup Codecov token for GitHub repository<a class="headerlink" href="#setup-codecov-token-for-github-repository" title="Link to this heading"></a></h2>
<p id="codecov-token-setup">For each PR, we use <code class="docutils literal notranslate"><span class="pre">Codecov</span></code> to report the test coverage percentage change as shown below.</p>
<img alt="codecov-in-pr-comment" src="../_images/codecov-pr.png" />
<p>To do so, the repository maintainer needs to provide a <code class="docutils literal notranslate"><span class="pre">CODECOV_TOKEN</span></code>.  Please follow the step-by-step guide below.</p>
<ol class="arabic">
<li><p>Ensure your GitHub repository is public.</p></li>
<li><p>Visit <a class="reference external" href="https://app.codecov.io/">https://app.codecov.io/</a></p></li>
<li><p>Connect your repository or organization with Codecov by clicking <code class="docutils literal notranslate"><span class="pre">Configure</span> <span class="pre">Codecov's</span> <span class="pre">GitHub</span> <span class="pre">app</span></code>, shown below:</p>
<blockquote>
<div><img alt="codecov-configure-github-project-button" src="../_images/codecov-configure.png" />
</div></blockquote>
</li>
<li><p>Scroll down, find your repository of interest, and click <code class="docutils literal notranslate"><span class="pre">Configure</span></code>, shown below:</p>
<blockquote>
<div><img alt="codecov-list-github-projects" src="../_images/codecov-projects.png" />
</div></blockquote>
</li>
<li><p>Scroll down again, copy <code class="docutils literal notranslate"><span class="pre">CODECOV_TOKEN</span></code>, shown below:</p>
<blockquote>
<div><img alt="codecov-list-github-projects" src="../_images/codecov-token.png" />
</div></blockquote>
</li>
<li><p>In your GitHub repository, go to <code class="docutils literal notranslate"><span class="pre">Settings</span></code>, then click <code class="docutils literal notranslate"><span class="pre">Actions</span></code> under the <code class="docutils literal notranslate"><span class="pre">Secrets</span> <span class="pre">and</span> <span class="pre">Variables</span></code> tab.</p></li>
<li><p>Click <code class="docutils literal notranslate"><span class="pre">New</span> <span class="pre">repository</span> <span class="pre">secret</span></code>.</p></li>
<li><p>Paste the token value and name it as <code class="docutils literal notranslate"><span class="pre">CODECOV_TOKEN</span></code> secret as shown below:</p>
<blockquote>
<div><img alt="codecov-list-github-projects" src="../_images/codecov-github.png" />
</div></blockquote>
</li>
<li><p>Done. The <strong>Codecov token</strong> is now set up for the repository. From now on, a new comment will be generated on each PR with the Codecov status automatically.</p></li>
</ol>
</section>
<section id="allow-github-actions-to-write-comments-in-prs">
<h2>Allow GitHub Actions to write comments in PRs<a class="headerlink" href="#allow-github-actions-to-write-comments-in-prs" title="Link to this heading"></a></h2>
<p>As you will see in the next section, we’d like to have GitHub Actions write comments such as warnings. Let’s specify the permissions in the GitHub repository settings by following the steps below.</p>
<ol class="arabic simple">
<li><p>Visit the <span class="guilabel">Settings</span> page of the GitHub repository.</p></li>
<li><p>Click on <span class="guilabel">Actions</span> in the left sidebar.</p></li>
<li><p>Click on <span class="guilabel">General</span> in the left sidebar.</p></li>
<li><p>Scroll down to the <span class="guilabel">Workflow permissions</span> section.</p></li>
<li><p>Select <span class="guilabel">Read and write permissions</span>.</p></li>
<li><p>Done!</p></li>
</ol>
</section>
<section id="add-news-items-in-the-github-pull-request">
<span id="news-keyboard-shortcut"></span><h2>Add news items in the GitHub pull request<a class="headerlink" href="#add-news-items-in-the-github-pull-request" title="Link to this heading"></a></h2>
<p>Before merging to <code class="docutils literal notranslate"><span class="pre">main</span></code>, we require that each PR includes a file documenting the changes under <code class="docutils literal notranslate"><span class="pre">\news</span></code>. This ensures that the changes are documented in the <code class="docutils literal notranslate"><span class="pre">CHANGELOG.rst</span></code> when you create a new release, as shown in <a class="reference external" href="https://billingegroup.github.io/scikit-package/release.html">https://billingegroup.github.io/scikit-package/release.html</a>, for example.</p>
<blockquote>
<div><div class="admonition important">
<p class="admonition-title">Important</p>
<p>If no news file is created for this PR, the CI will not only fail but also write a comment to remind you to create a news file. Recall we granted GitHub Actions permission to write comments in the PR in the previous section.</p>
</div>
</div></blockquote>
<p>Let’s create a news item for the changes made in this PR.</p>
<ol class="arabic">
<li><p>Get the latest updates from the remote GitHub repository.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>fetch<span class="w"> </span>--all
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Check out the <code class="docutils literal notranslate"><span class="pre">skpkg-migration</span></code> branch and sync with the remote branch.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>checkout<span class="w"> </span>skpkg-migration
$<span class="w"> </span>git<span class="w"> </span>pull<span class="w"> </span>origin<span class="w"> </span>skpkg-migration
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Make a copy of <code class="docutils literal notranslate"><span class="pre">news/TEMPLATE.rst</span></code> and rename to <code class="docutils literal notranslate"><span class="pre">news/&lt;branch-name&gt;.rst</span></code>.</p></li>
<li><p>(optional) If you are using a Linux shell, you can setup an <code class="docutils literal notranslate"><span class="pre">alias</span></code> to make the creation of the news file ready for editing much quicker and easier:</p>
<blockquote>
<div><p>Add the following line to <code class="docutils literal notranslate"><span class="pre">~/.bashrc</span></code> or <code class="docutils literal notranslate"><span class="pre">~/.zshrc</span></code> file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">alias</span><span class="w"> </span><span class="nv">cpnews</span><span class="o">=</span><span class="s2">&quot;cp news/TEMPLATE.rst news/</span><span class="k">$(</span>git<span class="w"> </span>rev-parse<span class="w"> </span>--abbrev-ref<span class="w"> </span>HEAD<span class="k">)</span><span class="s2">.rst&quot;</span>
</pre></div>
</div>
<p>Run the following command to apply the shell configuration.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">source</span><span class="w"> </span>~/.bashrc<span class="w">  </span><span class="c1"># if you are using bash</span>
$<span class="w"> </span><span class="nb">source</span><span class="w"> </span>~/.zshrc<span class="w">  </span><span class="c1"># if you are using zsh</span>
</pre></div>
</div>
<p>Now, whenever you want to create a news file, simply navigate to the top-level directory in the project and type <code class="docutils literal notranslate"><span class="pre">cpnews</span></code> on the command line.</p>
<p>You can then open the project in an editor. The news file located under <code class="docutils literal notranslate"><span class="pre">news</span></code> will have the name <code class="docutils literal notranslate"><span class="pre">&lt;branch-name&gt;.rst</span></code> where <code class="docutils literal notranslate"><span class="pre">&lt;branch-name&gt;</span></code> is replaced by the current branch name.</p>
<p>Add a description of the edits made in this PR. This should be a user-facing high-level summary of the edits made in this PR and will be automatically converted into the <code class="docutils literal notranslate"><span class="pre">CHANGELOG.rst</span></code> when the code is released.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>How do I write good news items? What if the changes in the PR are trivial and no news is needed? Please check out the news guide in the FAQ <a class="reference internal" href="../billinge-group-standards.html#news-item-practice"><span class="std std-ref">here</span></a>.</p>
</div>
</div></blockquote>
</li>
<li><p>Do not delete <code class="docutils literal notranslate"><span class="pre">news/TEMPLATE.rst</span></code>. Leave it as it is.</p></li>
<li><p>Do not modify other section headers in the rst file. Replace <code class="docutils literal notranslate"><span class="pre">*</span> <span class="pre">&lt;news</span> <span class="pre">item&gt;</span></code> with the following item:</p>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>**Added:**

* Support public releases with scikit-package by migrating the package from Level 4 to Level 5 in the scikit-package standard.
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Push the change to the remote GitHub repository.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>add<span class="w"> </span>news/skpkg-migration.rst
$<span class="w"> </span>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;chore: Add news item for skpkg-migration&quot;</span>
$<span class="w"> </span>git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>skpkg-migration
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<p>Congratulations! You are done with migrating your package from Level 4 to Level 5. You can now start writing docstrings for your Python code and tests for your code. Then, also write good documentation for your code, including Getting Started guides.</p>
<blockquote>
<div><div class="admonition important">
<p class="admonition-title">Important</p>
<p>For writing great news items, Python docstrings, tests, and commit messages, check the Billinge research group’s guidelines <a class="reference internal" href="../billinge-group-standards.html#billinge-group-standards"><span class="std std-ref">here</span></a>.</p>
</div>
</div></blockquote>
</section>
<section id="optional-build-api-reference-documentation">
<h2>(Optional) Build API reference documentation<a class="headerlink" href="#optional-build-api-reference-documentation" title="Link to this heading"></a></h2>
<p>If you want to build the API documentation for your package, like <a class="reference external" href="https://www.diffpy.org/diffpy.utils/api/diffpy.utils.html">https://www.diffpy.org/diffpy.utils/api/diffpy.utils.html</a>, here is a quick guide for you.</p>
<p>First, check whether your package is a standard package or a package that supports namespace imports.</p>
<ul class="simple">
<li><p>If your package can be imported as <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">&lt;package_name&gt;</span></code>, you can use <code class="docutils literal notranslate"><span class="pre">sphinx-apidoc</span></code> to generate the API <code class="docutils literal notranslate"><span class="pre">.rst</span></code> files each time your documentation is re-rendered. Follow the instructions <a class="reference internal" href="../frequently-asked-questions.html#faq-doc-api-standard"><span class="std std-ref">here</span></a>.</p></li>
<li><p>If your package supports <strong>namespace import</strong>, like <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">&lt;namespace_name&gt;.&lt;package_name&gt;</span></code>, you can use our script called <code class="docutils literal notranslate"><span class="pre">auto_api.py</span></code> to generate the API documentation. Follow the instructions <a class="reference internal" href="../frequently-asked-questions.html#faq-doc-api-namespace"><span class="std std-ref">here</span></a>.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Do you want to know the difference in folder structure between a package that uses regular imports vs. namespace imports? Please check the FAQ section on <a class="reference internal" href="../frequently-asked-questions.html#faq-project-setup-namespace"><span class="std std-ref">package structure</span></a>.</p>
</div>
</section>
<section id="ready-for-public-release">
<h2>Ready for public release?<a class="headerlink" href="#ready-for-public-release" title="Link to this heading"></a></h2>
<p>Congratulations! Your package has been successfully migrated. This has been the most challenging step. Now, let’s release your package to PyPI and conda-forge. Please visit the <a class="reference internal" href="../release-guides/pypi-github.html#release-pypi-github"><span class="std std-ref">Release your package</span></a> page to learn how to release your package!</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="level-4-tutorial.html" class="btn btn-neutral float-left" title="(Level 4) Share code as a locally installable Python package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../release-guides/pypi-github.html" class="btn btn-neutral float-right" title="Publish on GitHub and to PyPI" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, The Trustees of Columbia University in the City of New York.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>