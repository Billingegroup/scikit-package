

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Frequently asked questions (FAQ) &mdash; scikit-package 0.0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=f539c95a"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="License" href="license.html" />
    <link rel="prev" title="How to release conda-forge package" href="conda-forge-guide.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            scikit-package
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-guide.html">How to release Python package</a></li>
<li class="toctree-l1"><a class="reference internal" href="conda-forge-guide.html">How to release conda-forge package</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Frequently asked questions (FAQ)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#pre-commit">Pre-commit</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-modify-line-width-limits">How do I modify line-width limits?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-ignore-words-lines-files-in-automatic-spelling-checks-in-pre-commit">How do I ignore words/lines/files in automatic spelling checks in pre-commit?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#project-setup">Project setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#i-read-scikit-package-supports-a-namespace-package-what-is-it-and-how-do-i-set-it-up">I read <code class="docutils literal notranslate"><span class="pre">scikit-package</span></code> supports a namespace package. What is it and how do I set it up?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#what-is-the-difference-between-a-namespace-package-and-a-regular-package">What is the difference between a namespace package and a regular package?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#now-i-am-interested-in-setting-up-a-namespace-package-how-do-i-set-it-up">Now, I am interested in setting up a namespace package. How do I set it up?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#release">Release</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-can-i-change-who-is-authorized-to-release-a-package">How can I change who is authorized to release a package?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-is-the-package-version-set-and-retrieved">How is the package version set and retrieved?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-include-exclude-files-in-pypi-release">How do I include/exclude files in PyPI release?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#why-have-we-decided-to-include-test-files-in-the-pypi-source-distribution">Why have we decided to include test files in the PyPI source distribution?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#billinge-group-standards">Billinge Group standards</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-we-communicate-via-github-commit-messages-and-issue-titles">How we communicate via GitHub commit messages and issue titles</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-we-communciate-development-progress-with-news-files">How we communciate development progress with news files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#github-pull-request-practices">GitHub Pull Request practices</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-we-write-tests-with-pytest">How we write tests with Pytest</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-we-write-docstrings">How we write docstrings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-we-design-error-message">How we design error message</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-we-write-file-names">How we write file names</a></li>
<li class="toctree-l3"><a class="reference internal" href="#other-considerations-for-maintaining-group-infrastructure">Other considerations for maintaining group infrastructure</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#documentation">Documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-can-i-preview-documentation-in-real-time">How can I preview documentation in real-time?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-re-deploy-online-documentation-without-another-release">How do I re-deploy online documentation without another release?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#conda-forge">conda-forge</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-add-a-new-admin-to-the-conda-forge-feedstock">How do I add a new admin to the conda-forge feedstock?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-do-pre-release-for-conda-forge">How do I do pre-release for conda-forge?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#github-actions">GitHub Actions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-set-different-python-versions-for-github-ci">How do I set different Python versions for GitHub CI?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#what-is-the-difference-between-pull-request-and-pull-request-target">What is the difference between <code class="docutils literal notranslate"><span class="pre">pull_request</span></code> and <code class="docutils literal notranslate"><span class="pre">pull_request_target</span></code>?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#dependency-management">Dependency management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#why-are-both-pip-txt-and-conda-txt-provided">Why are both pip.txt and conda.txt provided?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#github-workflow">GitHub workflow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#i-am-new-to-github-why-do-we-use-git-github">I am new to GitHub. Why do we use Git/GitHub?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#what-is-the-general-the-workflow">What is the general the workflow?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i-have-a-general-understanding-of-fork-clone-commit-push-and-pull-request-how-do-i-set-up-my-repository-for-packaging">I have a general understanding of fork, clone, commit, push, and pull request. How do I set up my repository for packaging?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#do-you-have-a-general-summary-of-each-term-used-in-the-github-workflow">Do you have a general summary of each term used in the GitHub workflow?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i-have-cloned-and-added-upstream-what-is-the-next-step">I have cloned and added <code class="docutils literal notranslate"><span class="pre">upstream</span></code>. What is the next step?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i-still-need-to-make-another-pull-request-how-do-i-do-that">I still need to make another pull request. How do I do that?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="release.html">Release Notes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">scikit-package</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Frequently asked questions (FAQ)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/frequently-asked-questions.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="frequently-asked-questions-faq">
<span id="frequently-asked-questions"></span><span id="index-0"></span><h1>Frequently asked questions (FAQ)<a class="headerlink" href="#frequently-asked-questions-faq" title="Link to this heading"></a></h1>
<p>Here, you will learn how to customize the <code class="docutils literal notranslate"><span class="pre">scikit-package</span></code> template for your own project, such as setting the line-width and including/excluding files for PyPI distribution. We also provide design decisions for the current setup of the <code class="docutils literal notranslate"><span class="pre">scikit-package</span></code> template.</p>
<section id="pre-commit">
<h2>Pre-commit<a class="headerlink" href="#pre-commit" title="Link to this heading"></a></h2>
<section id="how-do-i-modify-line-width-limits">
<h3>How do I modify line-width limits?<a class="headerlink" href="#how-do-i-modify-line-width-limits" title="Link to this heading"></a></h3>
<p>Three files need to be modified:</p>
<ol class="arabic simple">
<li><p>In <code class="docutils literal notranslate"><span class="pre">.isort.cfg</span></code>, modify <code class="docutils literal notranslate"><span class="pre">line_length</span></code>.</p></li>
<li><p>In <code class="docutils literal notranslate"><span class="pre">.flake8</span></code>, modify <code class="docutils literal notranslate"><span class="pre">max-line-length</span></code>.</p></li>
<li><p>In <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>, modify <code class="docutils literal notranslate"><span class="pre">line-length</span></code> under <code class="docutils literal notranslate"><span class="pre">[tool.black]</span></code>.</p></li>
</ol>
</section>
<section id="how-do-i-ignore-words-lines-files-in-automatic-spelling-checks-in-pre-commit">
<span id="codespell-add-word"></span><h3>How do I ignore words/lines/files in automatic spelling checks in pre-commit?<a class="headerlink" href="#how-do-i-ignore-words-lines-files-in-automatic-spelling-checks-in-pre-commit" title="Link to this heading"></a></h3>
<p>To ignore a word, add it to <code class="docutils literal notranslate"><span class="pre">.codespell/ignore_words.txt</span></code>.</p>
<p>To ignore a specific line, add it to <code class="docutils literal notranslate"><span class="pre">.codespell/ignore_lines.txt</span></code>. See the example below:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>;; src/translation.py
;; The following single-line comment is written in German.
# Hallo Welt
</pre></div>
</div>
<p>To ignore a specific file extension, add <code class="docutils literal notranslate"><span class="pre">*.ext</span></code> to the <code class="docutils literal notranslate"><span class="pre">skip</span></code> section under <code class="docutils literal notranslate"><span class="pre">[tool.codespell]</span></code> in <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>. For example, to ignore <code class="docutils literal notranslate"><span class="pre">.cif</span></code> and <code class="docutils literal notranslate"><span class="pre">.dat</span></code> files, use <code class="docutils literal notranslate"><span class="pre">skip</span> <span class="pre">=</span> <span class="pre">&quot;*.cif,*.dat&quot;</span></code>.</p>
</section>
</section>
<section id="project-setup">
<h2>Project setup<a class="headerlink" href="#project-setup" title="Link to this heading"></a></h2>
<section id="i-read-scikit-package-supports-a-namespace-package-what-is-it-and-how-do-i-set-it-up">
<h3>I read <code class="docutils literal notranslate"><span class="pre">scikit-package</span></code> supports a namespace package. What is it and how do I set it up?<a class="headerlink" href="#i-read-scikit-package-supports-a-namespace-package-what-is-it-and-how-do-i-set-it-up" title="Link to this heading"></a></h3>
<p>In plain English, a namespace package refers to a package that is organized in a way that allows importing and installing a package like <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">diffpy.pdffit2</span></code>. The package starts with an <code class="docutils literal notranslate"><span class="pre">org-name</span></code> or similar, and each package has a separate repository, i.e., <a class="reference external" href="https://github.com/diffpy/diffpy.pdffit2">https://github.com/diffpy/diffpy.pdffit2</a>. The consistency in naming can be beneficial for research groups by organizing research software projects and maintaining branding, as demonstrated by software projects in <a class="reference external" href="https://www.diffpy.org/">https://www.diffpy.org/</a>.</p>
<section id="what-is-the-difference-between-a-namespace-package-and-a-regular-package">
<h4>What is the difference between a namespace package and a regular package?<a class="headerlink" href="#what-is-the-difference-between-a-namespace-package-and-a-regular-package" title="Link to this heading"></a></h4>
<p>The difference is in the folder structure:</p>
<p>For a regular package <code class="docutils literal notranslate"><span class="pre">bg-mpl-stylesheets</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>├── src
│   ├── bg_mpl_stylesheets
│   │   ├── __init__.py
│   │   ├── colors.py
│   │   ├── inkscape_tools.py
</pre></div>
</div>
<p>You would import it as <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">bg_mpl_stylesheets</span></code> and the package name is <code class="docutils literal notranslate"><span class="pre">bg-mpl-stylesheets</span></code> on PyPI and conda-forge. See <a class="reference external" href="https://pypi.org/project/bg-mpl-stylesheets/">https://pypi.org/project/bg-mpl-stylesheets/</a>.</p>
<p>In constrat, here is an example of the <code class="docutils literal notranslate"><span class="pre">diffpy.utils</span></code> namespace package:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>├── pyproject.toml
├── src
│   ├── diffpy
│   │   ├── __init__.py
│   │   └── utils
│   │       ├── __init__.py
│   │       ├── diffraction_objects.py
</pre></div>
</div>
<p>Notice that there is a <code class="docutils literal notranslate"><span class="pre">diffpy</span></code> folder under <code class="docutils literal notranslate"><span class="pre">src</span></code>. The package name is <code class="docutils literal notranslate"><span class="pre">diffpy.utils</span></code> on PyPI and conda-forge and installable like <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">diffpy.utils</span></code>.</p>
</section>
<section id="now-i-am-interested-in-setting-up-a-namespace-package-how-do-i-set-it-up">
<h4>Now, I am interested in setting up a namespace package. How do I set it up?<a class="headerlink" href="#now-i-am-interested-in-setting-up-a-namespace-package-how-do-i-set-it-up" title="Link to this heading"></a></h4>
<p>Our <code class="docutils literal notranslate"><span class="pre">scikit-package</span></code> handles a namespace package automatically for you! This is what makes our scikit-package unique. All you have to do while creating a scikit-package package is to provide your package name as e.g., <code class="docutils literal notranslate"><span class="pre">diffpy.my_project</span></code> when prompted by <code class="docutils literal notranslate"><span class="pre">scikit-package</span> <span class="pre">https://github.com/Billingegroup/scikit-package</span></code>. The scikit-package will automatically create a namespace package for you based on the existence of the <code class="docutils literal notranslate"><span class="pre">.</span></code> that separates the <code class="docutils literal notranslate"><span class="pre">diffpy</span></code> and <code class="docutils literal notranslate"><span class="pre">my_project</span></code>.</p>
</section>
</section>
</section>
<section id="release">
<h2>Release<a class="headerlink" href="#release" title="Link to this heading"></a></h2>
<section id="how-can-i-change-who-is-authorized-to-release-a-package">
<span id="release-authority"></span><h3>How can I change who is authorized to release a package?<a class="headerlink" href="#how-can-i-change-who-is-authorized-to-release-a-package" title="Link to this heading"></a></h3>
<p>In <code class="docutils literal notranslate"><span class="pre">.github/workflows/build-wheel-release-upload.yml</span></code>, modify <code class="docutils literal notranslate"><span class="pre">github_admin_username</span></code> to the desired GitHub username. This username will be able to authorize the release by pushing the tag as instructed <a class="reference internal" href="release-guide.html#release-instructions-project-owner"><span class="std std-ref">here</span></a>.</p>
</section>
<section id="how-is-the-package-version-set-and-retrieved">
<h3>How is the package version set and retrieved?<a class="headerlink" href="#how-is-the-package-version-set-and-retrieved" title="Link to this heading"></a></h3>
<p>In <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>, the <code class="docutils literal notranslate"><span class="pre">setuptools-git-versioning</span></code> tool is used to dynamically retrieve the version based on the latest tag in the repository. The latest tag is pushed during the release workflow. The dynamically parsed version is globally accessible, via <code class="docutils literal notranslate"><span class="pre">&lt;package-name&gt;.__version__</span></code>.</p>
</section>
<section id="how-do-i-include-exclude-files-in-pypi-release">
<h3>How do I include/exclude files in PyPI release?<a class="headerlink" href="#how-do-i-include-exclude-files-in-pypi-release" title="Link to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">MANIFEST.in</span></code> file is used to control which files are included in the source distribution. Try running <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">build</span></code> and see the content under the <code class="docutils literal notranslate"><span class="pre">dist</span></code> folder generated.</p>
<p>To include all files under a folder, use <code class="docutils literal notranslate"><span class="pre">graft</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>graft src
graft tests
</pre></div>
</div>
<p>To include specific file(s), use <code class="docutils literal notranslate"><span class="pre">include</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>include AUTHORS.txt LICENSE*.txt README.rst
</pre></div>
</div>
<p>To exclude files globally, use <code class="docutils literal notranslate"><span class="pre">globally-exclude</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>global-exclude *.py[cod]  # Exclude all .pyc, .pyo, and .pyd files.
global-exclude .DS_Store  # Exclude Mac filesystem artifacts.
global-exclude __pycache__  # Exclude Python cache directories.
global-exclude .git*  # Exclude git files and directories.
</pre></div>
</div>
</section>
<section id="why-have-we-decided-to-include-test-files-in-the-pypi-source-distribution">
<h3>Why have we decided to include test files in the PyPI source distribution?<a class="headerlink" href="#why-have-we-decided-to-include-test-files-in-the-pypi-source-distribution" title="Link to this heading"></a></h3>
<p>We decided to include test files in the PyPI source distribution to facilitate unit testing with a newly built Conda package.</p>
<p>The conda-forge CI uses the source code distributed via PyPI to build a Conda package. After building the package, we want to run pytest to ensure all unit tests pass before release. Therefore, test files must be included in the source code. In contrast, no documentation is distributed with the package, as it is already accessible from the GitHub repository and does not serve a practical purpose in the distribution package itself.</p>
</section>
</section>
<section id="billinge-group-standards">
<h2>Billinge Group standards<a class="headerlink" href="#billinge-group-standards" title="Link to this heading"></a></h2>
<p>Please follow the guidelines <a class="reference internal" href="scikit-package-guide.html#news-file-guide"><span class="std std-ref">here</span></a>.</p>
<section id="how-we-communicate-via-github-commit-messages-and-issue-titles">
<h3>How we communicate via GitHub commit messages and issue titles<a class="headerlink" href="#how-we-communicate-via-github-commit-messages-and-issue-titles" title="Link to this heading"></a></h3>
<p>For commit messages and issue titles, we add prefixes adopted from <a class="reference external" href="https://www.conventionalcommits.org">https://www.conventionalcommits.org</a>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>feat: A new feature has been added.
fix: A bug has been fixed.
docs: Documentation changes only.
style: Changes that don&#39;t affect code functionality (e.g., formatting, whitespace).
refactor: Code changes that neither fix a bug nor add a feature.
perf: Performance improvements.
test: Adding missing tests or correcting existing ones.
chore: Updates to the build process or auxiliary tools.
build: Changes that affect the build artifact or external dependencies.
ci: Updates to CI configuration files and scripts.
revert: Reverts a previous commit.
release: A new package version is being prepared.
</pre></div>
</div>
<ul class="simple">
<li><p>Example 1: “feat: create a <code class="docutils literal notranslate"><span class="pre">DiffractionObject.morph_to()</span></code> method”</p></li>
<li><p>Example 2: “bug: handle divide by zero error in <code class="docutils literal notranslate"><span class="pre">DiffractionObject.scale_to</span></code>”</p></li>
</ul>
<p>Please see an example here: <a class="reference external" href="https://github.com/Billingegroup/scikit-package/issues">https://github.com/Billingegroup/scikit-package/issues</a>. There are a few benefits to adding prefixes to GitHub issue titles. First, it helps us prioritize tasks from the notifications. Second, it helps reference issues in a comment within an issue or pull request and organize tasks.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>A commit message is written for PR reviewers and for debuggers. Avoid verbosity for a quick overview. An ideal commit message communicates file(s) of interest, the reason for the modification, and what modifications were made. e.g., “chore: move all files from docs to doc for scikit-packaging.”</p>
</div>
</section>
<section id="how-we-communciate-development-progress-with-news-files">
<h3>How we communciate development progress with news files<a class="headerlink" href="#how-we-communciate-development-progress-with-news-files" title="Link to this heading"></a></h3>
<p>Please refer to the process of generating a news file for each PR <a class="reference internal" href="scikit-package-guide.html#news-file-guide"><span class="std std-ref">here</span></a>.</p>
</section>
<section id="github-pull-request-practices">
<h3>GitHub Pull Request practices<a class="headerlink" href="#github-pull-request-practices" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p>Have a theme for each PR to reduce cognitive overload for the reviewer.</p></li>
<li><p>Make PRs small with the possibility of rejection.</p></li>
<li><p>Write “closes #&lt;issue-number&gt;” in the PR comment to automatically close the issue when the PR is merged. See <a class="reference external" href="https://docs.github.com/en/issues/tracking-your-work-with-issues/linking-a-pull-request-to-an-issue">GitHub documentation</a>.</p></li>
<li><p>Review your own PR. Start as a draft PR, visit “Files changed”, add comments, and then request a review. In-line comments are needed if the changes are not obvious for the reviewer.</p></li>
<li><p>If another commit was pushed after “ready for review”, write another comment “ready for review after fixing ____” so that the reviewer is directed to the PR, not the file changes by the new commit.</p></li>
<li><p>PR from a new branch if it contains a meaningless commit history.</p></li>
<li><p>Do not force push. Use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">revert</span></code> to unwind the previous commit.</p></li>
<li><p>If you’ve made a mistake but have not used <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code>, use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">restore</span> <span class="pre">&lt;file-name&gt;</span></code>.</p></li>
<li><p>Before CI is integrated, include local test passing results in each PR to save time for the reviewer.</p></li>
<li><p>For migrating files from one folder to another folder, use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">mv</span></code>.</p></li>
<li><p>For writing release news, “changed” refers to what would affect the user. “Fixed” refers to bugs or refactoring.</p></li>
<li><p>No news file is needed for fixing typos or grammatical errors.</p></li>
<li><p>Each PR is designed to address an issue on GitHub. If there is no issue, make one.</p></li>
<li><p>For deleting files generated by the OS such as <code class="docutils literal notranslate"><span class="pre">.DS_Store</span></code> use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">rm</span></code> instead of <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> to also remove from the Git index (staging area).</p></li>
<li><p>When a PR is closed for any reason, add a single sentence in the comment explaining why the PR is being closed. If a new PR is created, add the new PR link in the comment.</p></li>
</ol>
</section>
<section id="how-we-write-tests-with-pytest">
<h3>How we write tests with Pytest<a class="headerlink" href="#how-we-write-tests-with-pytest" title="Link to this heading"></a></h3>
<p>The following practices have been developed to ensure consistency in writing tests:</p>
<ol class="arabic simple">
<li><p>Comment starts with a uppercase letter (PEP8 standard) unless it’s a name starting with a lowercase letter like a function name.</p></li>
<li><p>Include a high-level test function comment e.g., <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">Test</span> <span class="pre">conversion</span> <span class="pre">of</span> <span class="pre">q</span> <span class="pre">to</span> <span class="pre">tth</span> <span class="pre">with</span> <span class="pre">q</span> <span class="pre">and</span> <span class="pre">wavelength</span></code></p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">C1:</span> <span class="pre">Start</span> <span class="pre">with</span> <span class="pre">a</span> <span class="pre">capital</span> <span class="pre">letter...</span></code> or <code class="docutils literal notranslate"><span class="pre">Case</span> <span class="pre">1:</span> <span class="pre">Start...</span></code> for each condition under <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.parametrize</span></code>.</p></li>
<li><p>If applicable, group similar test conditions under a single case. Numerate each test condition.</p></li>
<li><p>Divide a test case comment into two parts: <code class="docutils literal notranslate"><span class="pre">x,</span> <span class="pre">y,</span> <span class="pre">z</span> <span class="pre">(conditions),</span> <span class="pre">expect...</span></code>. Ensure there is a <code class="docutils literal notranslate"><span class="pre">expect</span></code> keyword after the test conditions provided.</p></li>
<li><p>Use descriptive yet concise variable names for expected values (e.g., <code class="docutils literal notranslate"><span class="pre">expected_xarrays</span></code> instead of <code class="docutils literal notranslate"><span class="pre">expected</span></code>)</p></li>
<li><p>Order test cases from the most general to edge cases. This helps readers understand the basic function behavior first before utilizing or encountering unusual features or behaviors.</p></li>
<li><p>Consider moving reusable code objects to <code class="docutils literal notranslate"><span class="pre">conftest.py</span></code>. See warning messages and objects defined in <a class="reference external" href="https://github.com/diffpy/diffpy.utils/blob/main/tests/conftest.py">https://github.com/diffpy/diffpy.utils/blob/main/tests/conftest.py</a> available in each test function in <a class="reference external" href="https://github.com/diffpy/diffpy.utils/blob/main/tests/test_diffraction_objects.py/">https://github.com/diffpy/diffpy.utils/blob/main/tests/test_diffraction_objects.py/</a></p></li>
</ol>
<p>Pytest example 1</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span>
    <span class="s2">&quot;xtype, expected_xarray&quot;</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="c1"># Test whether on_xtype returns the correct xarray values</span>
        <span class="c1"># C1: tth to tth, expect no change in xarray value</span>
        <span class="c1"># 1. &quot;tth&quot; provided, expect tth</span>
        <span class="c1"># 2. &quot;2theta&quot; provided, expect tth</span>
        <span class="p">(</span><span class="s2">&quot;tth&quot;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">30</span><span class="p">,</span> <span class="mi">60</span><span class="p">])),</span>
        <span class="p">(</span><span class="s2">&quot;2theta&quot;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">30</span><span class="p">,</span> <span class="mi">60</span><span class="p">])),</span>
        <span class="c1"># C2: &quot;q&quot; provided, expect q converted from tth</span>
        <span class="p">(</span><span class="s2">&quot;q&quot;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.51764</span><span class="p">,</span> <span class="mi">1</span><span class="p">])),</span>
        <span class="c1"># C3: &quot;d&quot; provided, expect d converted from tth</span>
        <span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">12.13818</span><span class="p">,</span> <span class="mf">6.28319</span><span class="p">])),</span>
    <span class="p">],</span>
<span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_on_xtype</span><span class="p">(</span><span class="n">xtype</span><span class="p">,</span> <span class="n">expected_xarray</span><span class="p">,</span> <span class="n">do_minimal_tth</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>Pytest example 2 - multi-line arguments</p>
<ul class="simple">
<li><p>Add <cite># C1:</cite> inside within <cite>( … )</cite>. More examples <a class="reference external" href="https://github.com/diffpy/diffpy.utils/pull/277">here</a>.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span>
    <span class="s2">&quot;do_args_1, do_args_2, expected_equality, wavelength_warning_expected&quot;</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="c1"># Test when __eq__ returns True and False</span>
        <span class="p">(</span>  <span class="c1"># C1: Identical args, expect equality</span>
            <span class="p">{</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;same&quot;</span><span class="p">,</span>
                <span class="s2">&quot;scat_quantity&quot;</span><span class="p">:</span> <span class="s2">&quot;x-ray&quot;</span><span class="p">,</span>
                <span class="s2">&quot;wavelength&quot;</span><span class="p">:</span> <span class="mf">0.71</span><span class="p">,</span>
                <span class="s2">&quot;xtype&quot;</span><span class="p">:</span> <span class="s2">&quot;q&quot;</span><span class="p">,</span>
                <span class="s2">&quot;xarray&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">]),</span>
                <span class="s2">&quot;yarray&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">100.0</span><span class="p">,</span> <span class="mf">200.0</span><span class="p">]),</span>
                <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;thing1&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;same&quot;</span><span class="p">,</span>
                <span class="s2">&quot;scat_quantity&quot;</span><span class="p">:</span> <span class="s2">&quot;x-ray&quot;</span><span class="p">,</span>
                <span class="s2">&quot;wavelength&quot;</span><span class="p">:</span> <span class="mf">0.71</span><span class="p">,</span>
                <span class="s2">&quot;xtype&quot;</span><span class="p">:</span> <span class="s2">&quot;q&quot;</span><span class="p">,</span>
                <span class="s2">&quot;xarray&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">]),</span>
                <span class="s2">&quot;yarray&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">100.0</span><span class="p">,</span> <span class="mf">200.0</span><span class="p">]),</span>
                <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;thing1&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
            <span class="p">},</span>
            <span class="kc">True</span><span class="p">,</span>
            <span class="kc">False</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="p">(</span>  <span class="c1"># C2: Different names, expect inequality</span>
            <span class="p">{</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;something&quot;</span><span class="p">,</span>
                <span class="s2">&quot;xtype&quot;</span><span class="p">:</span> <span class="s2">&quot;tth&quot;</span><span class="p">,</span>
                <span class="s2">&quot;xarray&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
                <span class="s2">&quot;yarray&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
                <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;thing1&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;thing2&quot;</span><span class="p">:</span> <span class="s2">&quot;thing2&quot;</span><span class="p">},</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;something else&quot;</span><span class="p">,</span>
                <span class="s2">&quot;xtype&quot;</span><span class="p">:</span> <span class="s2">&quot;tth&quot;</span><span class="p">,</span>
                <span class="s2">&quot;xarray&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
                <span class="s2">&quot;yarray&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
                <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;thing1&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;thing2&quot;</span><span class="p">:</span> <span class="s2">&quot;thing2&quot;</span><span class="p">},</span>
            <span class="p">},</span>
            <span class="kc">False</span><span class="p">,</span>
            <span class="kc">True</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">],</span>
<span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_equality</span><span class="p">(</span><span class="n">do_args_1</span><span class="p">,</span> <span class="n">do_args_2</span><span class="p">,</span> <span class="n">expected_equality</span><span class="p">,</span> <span class="n">wavelength_warning_expected</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Comment starts with a uppercase letter (PEP8 standard) unless it’s a name starting with a lowercase letter like a function name.</p></li>
</ol>
</section>
<section id="how-we-write-docstrings">
<h3>How we write docstrings<a class="headerlink" href="#how-we-write-docstrings" title="Link to this heading"></a></h3>
<p>Please bookmark the following:</p>
<blockquote>
<div><p>PEP257: <a class="reference external" href="https://peps.python.org/pep-0257">https://peps.python.org/pep-0257</a></p>
<p>PEP8: <a class="reference external" href="https://peps.python.org/pep-0008/">https://peps.python.org/pep-0008/</a></p>
<p>NumPy document style guide: <a class="reference external" href="https://numpydoc.readthedocs.io/en/latest/format.html">https://numpydoc.readthedocs.io/en/latest/format.html</a></p>
</div></blockquote>
<p>In the group, we follow the NumPy standard:</p>
<ol class="arabic simple">
<li><p>A one-line summary that does not use variable names or the function name is added before a full description.</p></li>
<li><p>Use “Return a dict” instead of “Returns a dict”. Comments are instructions.</p></li>
<li><p>“The” is used for the starting description of attribute/parameter/return</p></li>
<li><p>Full docstrings are not required for private functions.</p></li>
</ol>
<p>For examples, please refer to <a class="reference external" href="https://github.com/diffpy/diffpy.utils/blob/main/src/diffpy/utils/diffraction_objects.py">https://github.com/diffpy/diffpy.utils/blob/main/src/diffpy/utils/diffraction_objects.py</a>.</p>
</section>
<section id="how-we-design-error-message">
<h3>How we design error message<a class="headerlink" href="#how-we-design-error-message" title="Link to this heading"></a></h3>
<p>Divide an error message into two sections: (1) reason for error, (2) what to do to fix it. Ex) “Both release and pre-release specified. Please re-run the command specifying either release or pre_release.” Error messages are for users. Consider users without programming knowledge.</p>
</section>
<section id="how-we-write-file-names">
<h3>How we write file names<a class="headerlink" href="#how-we-write-file-names" title="Link to this heading"></a></h3>
<p>For public-facing documents accessible via URLs, use minus signs <code class="docutils literal notranslate"><span class="pre">-</span></code> between words:</p>
<ul class="simple">
<li><p>For project names, i.e., <code class="docutils literal notranslate"><span class="pre">https://github.com/billingegroup/bg-mpl-stylesheets</span></code></p></li>
<li><p>For doc/file paths, i.e., <code class="docutils literal notranslate"><span class="pre">doc/source/frequently-asked-questions.rst</span></code></p></li>
</ul>
<p>For CLI, also use minus signs <code class="docutils literal notranslate"><span class="pre">-</span></code> for args:</p>
<ul class="simple">
<li><p>i.e., <code class="docutils literal notranslate"><span class="pre">gh</span> <span class="pre">pr</span> <span class="pre">list</span> <span class="pre">--author</span> <span class="pre">&quot;&#64;sbillinge&quot;</span></code></p></li>
</ul>
</section>
<section id="other-considerations-for-maintaining-group-infrastructure">
<h3>Other considerations for maintaining group infrastructure<a class="headerlink" href="#other-considerations-for-maintaining-group-infrastructure" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Be extremely careful with changes that are visible to users.</p></li>
<li><p>Try not to pass down technical debt to future members. Do the extra work so that others can save time. i.e, making a PR to the scikit-package repo once an issue has been identified in a scikit-packageed project.</p></li>
</ul>
<p>reducing compute time, especially when computing resources are not the primary constraint.
- It is easier to remove things (e.g., dependencies) we don’t want than to add things that are needed in certain circumstances.</p>
</section>
</section>
<section id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Link to this heading"></a></h2>
<section id="how-can-i-preview-documentation-in-real-time">
<h3>How can I preview documentation in real-time?<a class="headerlink" href="#how-can-i-preview-documentation-in-real-time" title="Link to this heading"></a></h3>
<p>You may use Visual Studio Code. Please refer to the following section <a class="reference internal" href="scikit-package-guide.html#build-documentation-preview-real-time"><span class="std std-ref">here</span></a>.</p>
</section>
<section id="how-do-i-re-deploy-online-documentation-without-another-release">
<h3>How do I re-deploy online documentation without another release?<a class="headerlink" href="#how-do-i-re-deploy-online-documentation-without-another-release" title="Link to this heading"></a></h3>
<p>Visit the following URL of your package: <code class="docutils literal notranslate"><span class="pre">https://github.com/&lt;org-name&gt;/&lt;package-name&gt;/actions/workflows/publish-docs-on-release.yml</span></code> i.e., <a class="reference external" href="https://github.com/diffpy/diffpy.utils/actions/workflows/publish-docs-on-release.yml">https://github.com/diffpy/diffpy.utils/actions/workflows/publish-docs-on-release.yml</a>.</p>
<p>Click <code class="docutils literal notranslate"><span class="pre">Run</span> <span class="pre">workflow</span></code> and select the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch. Your online documentation will be updated with the latest changes without a new release.</p>
</section>
</section>
<section id="conda-forge">
<h2>conda-forge<a class="headerlink" href="#conda-forge" title="Link to this heading"></a></h2>
<section id="how-do-i-add-a-new-admin-to-the-conda-forge-feedstock">
<h3>How do I add a new admin to the conda-forge feedstock?<a class="headerlink" href="#how-do-i-add-a-new-admin-to-the-conda-forge-feedstock" title="Link to this heading"></a></h3>
<p>Please refer to the admin section in the conda-forge release guide <a class="reference internal" href="conda-forge-guide.html#conda-forge-add-admin"><span class="std std-ref">here</span></a>.</p>
</section>
<section id="how-do-i-do-pre-release-for-conda-forge">
<h3>How do I do pre-release for conda-forge?<a class="headerlink" href="#how-do-i-do-pre-release-for-conda-forge" title="Link to this heading"></a></h3>
<p>Please read our pre-release section in the conda-forge release guide <a class="reference internal" href="conda-forge-guide.html#conda-forge-pre-release"><span class="std std-ref">here</span></a>.</p>
</section>
</section>
<section id="github-actions">
<h2>GitHub Actions<a class="headerlink" href="#github-actions" title="Link to this heading"></a></h2>
<section id="how-do-i-set-different-python-versions-for-github-ci">
<h3>How do I set different Python versions for GitHub CI?<a class="headerlink" href="#how-do-i-set-different-python-versions-for-github-ci" title="Link to this heading"></a></h3>
<p>The default is Python 3.13 for <code class="docutils literal notranslate"><span class="pre">_tests-on-pr.yml</span></code> and <code class="docutils literal notranslate"><span class="pre">_publish-docs-on-release.yml</span></code>. Python 3.11, 3.12, and 3.13 are used for <code class="docutils literal notranslate"><span class="pre">_matrix-and-codecov-on-merge-to-main.yml</span></code>. To override the default, modify the three <code class="docutils literal notranslate"><span class="pre">.yml</span></code> files above in <code class="docutils literal notranslate"><span class="pre">.github/workflows/</span></code> as shown below:</p>
<ol class="arabic simple">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">python_version</span></code> in <code class="docutils literal notranslate"><span class="pre">.github/workflows/tests-on-pr.yml</span></code>:</p></li>
</ol>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">jobs</span><span class="p">:</span>
<span class="w"> </span><span class="nt">tests-on-pr</span><span class="p">:</span>
<span class="w">   </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Billingegroup/release-scripts/.github/workflows/_tests-on-pr.yml@v0</span>
<span class="w"> </span><span class="nt">with</span><span class="p">:</span>
<span class="w">   </span><span class="nt">project</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">package-name</span>
<span class="w">   </span><span class="nt">c_extension</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">   </span><span class="nt">headless</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">   </span><span class="nt">python_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.12</span>
<span class="w"> </span><span class="nt">secrets</span><span class="p">:</span>
<span class="w">   </span><span class="nt">CODECOV_TOKEN</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ secrets.CODECOV_TOKEN }}</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">python_version</span></code> in <code class="docutils literal notranslate"><span class="pre">.github/workflows/_publish-docs-on-release.yml</span></code>:</p></li>
</ol>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">jobs</span><span class="p">:</span>
<span class="w"> </span><span class="nt">docs</span><span class="p">:</span>
<span class="w">   </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Billingegroup/release-scripts/.github/workflows/_tests-on-pr.yml@v0</span>
<span class="w"> </span><span class="nt">with</span><span class="p">:</span>
<span class="w">   </span><span class="nt">project</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">package-name</span>
<span class="w">   </span><span class="nt">c_extension</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">   </span><span class="nt">headless</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">   </span><span class="nt">python_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.12</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">python_versions</span></code> in <code class="docutils literal notranslate"><span class="pre">.github/workflows/_matrix-and-codecov-on-merge-to-main.yml</span></code>:</p></li>
</ol>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">jobs</span><span class="p">:</span>
<span class="w"> </span><span class="nt">matrix-coverage</span><span class="p">:</span>
<span class="w">   </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Billingegroup/release-scripts/.github/workflows/_matrix-and-codecov-on-merge-to-main.yml@v0</span>
<span class="w"> </span><span class="nt">with</span><span class="p">:</span>
<span class="w">   </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">   </span><span class="l l-Scalar l-Scalar-Plain">python_versions</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;3.11,</span><span class="nv"> </span><span class="s">3.12&quot;</span>
</pre></div>
</div>
</section>
<section id="what-is-the-difference-between-pull-request-and-pull-request-target">
<h3>What is the difference between <code class="docutils literal notranslate"><span class="pre">pull_request</span></code> and <code class="docutils literal notranslate"><span class="pre">pull_request_target</span></code>?<a class="headerlink" href="#what-is-the-difference-between-pull-request-and-pull-request-target" title="Link to this heading"></a></h3>
<p>For the current GitHub CI for checking a news item, <code class="docutils literal notranslate"><span class="pre">pull_request_target</span></code> is used instead of <code class="docutils literal notranslate"><span class="pre">pull_request</span></code> as shown below:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Check News Item</span>

<span class="nt">on</span><span class="p">:</span>
<span class="w"> </span><span class="nt">pull_request_target</span><span class="p">:</span>
<span class="w">   </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pull_request</span></code>: This event configures the <code class="docutils literal notranslate"><span class="pre">GITHUB_TOKEN</span></code> with read-only permissions by default, especially when triggered by forks.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pull_request_target</span></code>: This event grants the <code class="docutils literal notranslate"><span class="pre">GITHUB_TOKEN</span></code> write permissions, enabling it to perform actions that modify the repository, such as posting comments, updating pull request statuses, or merging code. The news CI creates a comment when an additional news <code class="docutils literal notranslate"><span class="pre">.rst</span></code> is not found under the <code class="docutils literal notranslate"><span class="pre">news</span></code> folder. Hence, <code class="docutils literal notranslate"><span class="pre">pull_request_target</span></code> is used.</p></li>
</ul>
<p>Another key difference is that with <code class="docutils literal notranslate"><span class="pre">pull_request_target</span></code>, the <code class="docutils literal notranslate"><span class="pre">.yml</span></code> file <strong>must already be merged</strong> in the base branch at the time the pull request is opened or updated. For more, please refer to <a class="reference external" href="https://docs.github.com/en/actions/writing-workflows/choosing-when-your-workflow-runs/events-that-trigger-workflows#pull_request_target">GitHub docs</a>.</p>
</section>
</section>
<section id="dependency-management">
<h2>Dependency management<a class="headerlink" href="#dependency-management" title="Link to this heading"></a></h2>
<section id="why-are-both-pip-txt-and-conda-txt-provided">
<h3>Why are both pip.txt and conda.txt provided?<a class="headerlink" href="#why-are-both-pip-txt-and-conda-txt-provided" title="Link to this heading"></a></h3>
<p>Our preferred choice for installing the scikit-packageed package is as a Conda package, as outlined in the template <code class="docutils literal notranslate"><span class="pre">README.rst</span></code> file. With Conda, the end user can install all associated dependencies by running <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">create</span> <span class="pre">--name</span> <span class="pre">new_env</span> <span class="pre">&lt;package-name&gt;</span></code>. Additionally, the environment is tested via conda-forge CI before the Conda package is released, which helps ensure the package’s compatibility with its dependencies. Hence, we list conda package dependencies in <code class="docutils literal notranslate"><span class="pre">conda.txt</span></code>.</p>
<p>However, we also want to allow users to install the package via <code class="docutils literal notranslate"><span class="pre">pip</span></code>. To support this, we provide a separate file for pip dependencies, <code class="docutils literal notranslate"><span class="pre">pip.txt</span></code>. In most cases, the dependencies listed in <code class="docutils literal notranslate"><span class="pre">conda.txt</span></code> and <code class="docutils literal notranslate"><span class="pre">pip.txt</span></code> will be identical. However, there can be exceptions. For example, <code class="docutils literal notranslate"><span class="pre">matplotlib-base</span></code> is preferred for Conda installations, while <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> is used for pip installations.</p>
</section>
</section>
<section id="github-workflow">
<h2>GitHub workflow<a class="headerlink" href="#github-workflow" title="Link to this heading"></a></h2>
<section id="i-am-new-to-github-why-do-we-use-git-github">
<h3>I am new to GitHub. Why do we use Git/GitHub?<a class="headerlink" href="#i-am-new-to-github-why-do-we-use-git-github" title="Link to this heading"></a></h3>
<p>GitHub allows multiple contributors to work on a software project simultaneously under an organization like <code class="docutils literal notranslate"><span class="pre">Billingegroup</span></code> or <code class="docutils literal notranslate"><span class="pre">diffpy</span></code>. There are two primary needs. First, we want to ensure that any changes under this organization are reviewed by the organization’s project owner. Second, we want to ensure we add new changes from the latest version of the code, particularly when working with multiple contributors across different time zones. Hence, we use GitHub to serve the needs with a specific workflow below. Please see below for an overview of the GitHub workflow.</p>
</section>
<section id="what-is-the-general-the-workflow">
<span id="github-workflow-overview"></span><h3>What is the general the workflow?<a class="headerlink" href="#what-is-the-general-the-workflow" title="Link to this heading"></a></h3>
<p>Since sk-packaging requires a basic understanding of GitHub’s workflow, we will provide you with a brief overview and how to set up your repository.</p>
<p>First, if you are working on a package from an organization like <code class="docutils literal notranslate"><span class="pre">github.com/diffpy</span></code> or <code class="docutils literal notranslate"><span class="pre">github.com/Billingegroup</span></code>, you first copy the repository of the organization to your GitHub user account. This process is called <code class="docutils literal notranslate"><span class="pre">forking</span></code>.</p>
<p>Then, you will download the forked repository in your GitHub account to your local machine. This process is called <code class="docutils literal notranslate"><span class="pre">cloning</span></code>.</p>
<p>In the cloned repository on your local machine, you will make edits. You want to first add a description for the changes by “committing” with a message describing the changes. Then you will upload these changes to the <code class="docutils literal notranslate"><span class="pre">forked</span></code> repository in your account. This process of updating code from the local computer to the repository hosted by GitHub is called <code class="docutils literal notranslate"><span class="pre">pushing</span></code>.</p>
<p>From the forked repository, you then want to upload changes to the repository under <code class="docutils literal notranslate"><span class="pre">github.com/Billingegroup/scikit-package</span></code>, for example. This process is done through a process called <code class="docutils literal notranslate"><span class="pre">pull</span> <span class="pre">request</span></code>. The Project Owner reviews this pull request and merges it into the Billinge group’s repository. If you are the contributor as well as the Project Owner, you would be the one who reviews your own code and merges your changes.</p>
</section>
<section id="i-have-a-general-understanding-of-fork-clone-commit-push-and-pull-request-how-do-i-set-up-my-repository-for-packaging">
<h3>I have a general understanding of fork, clone, commit, push, and pull request. How do I set up my repository for packaging?<a class="headerlink" href="#i-have-a-general-understanding-of-fork-clone-commit-push-and-pull-request-how-do-i-set-up-my-repository-for-packaging" title="Link to this heading"></a></h3>
<p>Please be familiar with the terminology such as “fork”, “clone”, “push”, and “pull request” <a class="reference internal" href="#github-workflow-overview"><span class="std std-ref">above</span></a>.</p>
<p>You may fork the repository using the “Fork” button on the top right corner of the repository page. This will copy the repository to your GitHub account. e.g., <code class="docutils literal notranslate"><span class="pre">github.com/Billingegroup/scikit-package</span></code> to <code class="docutils literal notranslate"><span class="pre">github.com/sbillinge/scikit-package</span></code>.</p>
<p>Then download the forked repository under your account to the local machine by cloning:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/&lt;username&gt;/&lt;package-name&gt;
</pre></div>
</div>
<p>Now, you also want to link with the repository of the organization by adding the URL. Recall, we want to make changes from the latest state of the source code.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>remote<span class="w"> </span>add<span class="w"> </span>upstream<span class="w"> </span>https://github.com/&lt;org-name&gt;/&lt;package-name&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>What is <code class="docutils literal notranslate"><span class="pre">upstream</span></code>? The repository that you forked from, e.g. <code class="docutils literal notranslate"><span class="pre">Billingegroup/scikit-package</span></code> is referred to as the <code class="docutils literal notranslate"><span class="pre">upstream</span></code> repository.</p>
</div>
<p>Verify that you have the <code class="docutils literal notranslate"><span class="pre">upstream</span></code> URL set up as the organization.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>remote<span class="w"> </span>-v
</pre></div>
</div>
<p>Notice that you also have <code class="docutils literal notranslate"><span class="pre">origin</span></code> with an URL linking to your forked repository under your account. This is another GitHub jargon that refers to your forked repository.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>What is <code class="docutils literal notranslate"><span class="pre">remote</span></code>? The term <code class="docutils literal notranslate"><span class="pre">remote</span></code> is the opposite of <code class="docutils literal notranslate"><span class="pre">local</span></code>. In other words, <code class="docutils literal notranslate"><span class="pre">remote</span></code> refers to the repository that is hosted by GitHub. e.g., <code class="docutils literal notranslate"><span class="pre">github.com/Billingegroup/scikit-package</span></code> or <code class="docutils literal notranslate"><span class="pre">github.com/sbillinge</span></code>.</p>
</div>
</section>
<section id="do-you-have-a-general-summary-of-each-term-used-in-the-github-workflow">
<h3>Do you have a general summary of each term used in the GitHub workflow?<a class="headerlink" href="#do-you-have-a-general-summary-of-each-term-used-in-the-github-workflow" title="Link to this heading"></a></h3>
<dl class="field-list simple">
<dt class="field-odd">fork<span class="colon">:</span></dt>
<dd class="field-odd"><p>The process of copying a repository from an organization to your GitHub account. e.g., <code class="docutils literal notranslate"><span class="pre">github.com/Billingegroup/scikit-package</span></code> to <code class="docutils literal notranslate"><span class="pre">github.com/sbillinge/scikit-package</span></code>.</p>
</dd>
<dt class="field-even">upstream<span class="colon">:</span></dt>
<dd class="field-even"><p>The repository of the original source code. e.g., <code class="docutils literal notranslate"><span class="pre">github.com/Billingegroup/scikit-package</span></code>.</p>
</dd>
<dt class="field-odd">origin<span class="colon">:</span></dt>
<dd class="field-odd"><p>The forked repository under your account. e.g., <code class="docutils literal notranslate"><span class="pre">github.com/sbillinge/scikit-package</span></code>.</p>
</dd>
<dt class="field-even">remote<span class="colon">:</span></dt>
<dd class="field-even"><p>The repository that is hosted by GitHub. e.g., <code class="docutils literal notranslate"><span class="pre">github.com/Billingegroup/scikit-package</span></code> or <code class="docutils literal notranslate"><span class="pre">github.com/sbillinge/scikit-package</span></code>.</p>
</dd>
<dt class="field-odd">branch<span class="colon">:</span></dt>
<dd class="field-odd"><p>The branch serves as a folder that contains the files of the repository. The <code class="docutils literal notranslate"><span class="pre">main</span></code> branch is the branch that is used for the final version of the code. Many branches can be created for different features or bug fixes that are later merged into the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch.</p>
</dd>
<dt class="field-even">git clone<span class="colon">:</span></dt>
<dd class="field-even"><p>The process of locally downloading a repository from GitHub (<code class="docutils literal notranslate"><span class="pre">remote</span></code>) to your local machine.</p>
</dd>
<dt class="field-odd">git push<span class="colon">:</span></dt>
<dd class="field-odd"><p>The process of updating code from the local computer to the GitHub remote repository. Push can be made to the <code class="docutils literal notranslate"><span class="pre">origin</span></code> or <code class="docutils literal notranslate"><span class="pre">upstream</span></code> repository. But, in our workflow, we push to the <code class="docutils literal notranslate"><span class="pre">origin</span></code> repository, and then we create a pull request to merge the changes from <code class="docutils literal notranslate"><span class="pre">origin</span></code> to the <code class="docutils literal notranslate"><span class="pre">upstream</span></code> repository.</p>
</dd>
<dt class="field-even">git commit<span class="colon">:</span></dt>
<dd class="field-even"><p>The process of adding a description for the changes made in the files that are ready to be pushed.</p>
</dd>
<dt class="field-odd">git add<span class="colon">:</span></dt>
<dd class="field-odd"><p>The process of selecting files to be included within a single commit.</p>
</dd>
</dl>
</section>
<section id="i-have-cloned-and-added-upstream-what-is-the-next-step">
<h3>I have cloned and added <code class="docutils literal notranslate"><span class="pre">upstream</span></code>. What is the next step?<a class="headerlink" href="#i-have-cloned-and-added-upstream-what-is-the-next-step" title="Link to this heading"></a></h3>
<p>We want to first sync our local folder with the <code class="docutils literal notranslate"><span class="pre">upstream</span></code> repository. This process is called <code class="docutils literal notranslate"><span class="pre">pulling</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>checkout<span class="w"> </span>main
git<span class="w"> </span>pull<span class="w"> </span>upstream<span class="w"> </span>main
</pre></div>
</div>
<p>Above, we checkout the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch of your cloned folder. We then download all the latest changes from the <code class="docutils literal notranslate"><span class="pre">upstream</span></code> repository. Recall that a GitHub repository is contributed by multiple contributors. Hence, we want to ensure that we are working with the latest version of the code in the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch.</p>
<p>Once we are fully synced with the <code class="docutils literal notranslate"><span class="pre">upstream</span></code> repository, we can now start making changes to the code.</p>
<p>Instead of directly working in the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch of your cloned repository, you will create a copy of <code class="docutils literal notranslate"><span class="pre">main</span></code> by “branching” it from <code class="docutils literal notranslate"><span class="pre">main</span></code>. Think of a tree. You can name it anything you want like <code class="docutils literal notranslate"><span class="pre">docs-faq</span></code>, etc.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>docs-faq
</pre></div>
</div>
<p>The above command not only creates a new branch but also switches to the new branch. You can verify that you are in the new branch by running:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>branch
</pre></div>
</div>
<p>Of course, you can always switch back to the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch by using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">main</span></code>.</p>
<p>Now, you are ready to make changes to the code in the branch. If you have a README file in your project, try to modify it. Once you are done, you want to add the changes to a hidden folder called <code class="docutils literal notranslate"><span class="pre">.git</span></code>. This process is called <code class="docutils literal notranslate"><span class="pre">staging</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>add<span class="w"> </span>README.rst
</pre></div>
</div>
<p>Then, now you want to commit the changes with a message describing the changes.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;docs: added a FAQ section in the README&quot;</span>
</pre></div>
</div>
<p>Now, you want to push the changes to the <code class="docutils literal notranslate"><span class="pre">origin</span></code> repository under your account. Recall <code class="docutils literal notranslate"><span class="pre">origin</span></code> refers to the forked repository under your account hosted by GitHub.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>push<span class="w"> </span>--set-upstream<span class="w"> </span>origin<span class="w"> </span>docs-FAQ
</pre></div>
</div>
<p>Go to your forked repository under your account on GitHub. You will see a green button that says “Compare &amp; pull request”. Click on it. You will see the changes you made in the branch. Click on “Create pull request”. Add a description of the changes you made. Click on “Create pull request”.</p>
<p>The reviewer will review the changes and merge them into the <code class="docutils literal notranslate"><span class="pre">upstream</span></code> repository. You have successfully made your first contribution to the organization’s repository.</p>
</section>
<section id="i-still-need-to-make-another-pull-request-how-do-i-do-that">
<h3>I still need to make another pull request. How do I do that?<a class="headerlink" href="#i-still-need-to-make-another-pull-request-how-do-i-do-that" title="Link to this heading"></a></h3>
<p>Now, you want to make another pull request. You want to make sure that you are working with the latest version of the code in the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>checkout<span class="w"> </span>main
git<span class="w"> </span>pull<span class="w"> </span>upstream<span class="w"> </span>main
</pre></div>
</div>
<p>The command above will sync your local folder with the <code class="docutils literal notranslate"><span class="pre">upstream</span></code> repository. It should download the changes made by other contributors as well as the recent commit you made in the <code class="docutils literal notranslate"><span class="pre">docs-FAQ</span></code> branch, for example.</p>
<p>Again, you checkout a new branch from the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch. You can name it anything you want, e.g. <code class="docutils literal notranslate"><span class="pre">docs-typo</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>docs-typo
</pre></div>
</div>
<p>You repeat the process of git add, commit, push to your <code class="docutils literal notranslate"><span class="pre">origin</span></code> (your forked repository) and then make a PR to the <code class="docutils literal notranslate"><span class="pre">upstream</span></code> repository (the organization’s repository).</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="conda-forge-guide.html" class="btn btn-neutral float-left" title="How to release conda-forge package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="license.html" class="btn btn-neutral float-right" title="License" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, The Trustees of Columbia University in the City of New York.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>